<%= render "tabs" %>


<div class="container mt-3">
  <h2>Rejected Swaps</h2>
  <% @requests.each do |request| %>
    <% if request.buyer_item.user == current_user %>
      <div class="product-card" data-toggle="modal" data-target="#modal-<%= request.id %>">
        <div class="product-details">
          <div class="product-details1">
            <div class="product-p">
              <p>Title: <%= request.buyer_item.book.title %></p>
              <p>Author: <%= request.buyer_item.book.author %></p>
            </div>
            <div>
              <p class="bold">Condition: <%= request.buyer_item.quality %></p>
            </div>
          </div>
          <div class="product-details2">
            <% if request.buyer_item.book.photo.attached? %>
              <%= cl_image_tag(request.buyer_item.book.photo.key, crop: :fill, height: 100, class: "product-img") %>
            <% end %>
          </div>
        </div>
      </div>
      <div class="modal fade" id="modal-<%= request.id %>" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="d-flex justify-content-center mt-3">
              <h5 class="modal-title" id="exampleModalLabel">Requested Trade</h5>
            </div>
            <div class="modal-body">
              <div class='d-flex justify-content-between'>
                  <div class="your-book">
                  <% if request.buyer_item.book.photo.attached? %>
                    <%= cl_image_tag(request.buyer_item.book.photo.key, crop: :fill, height: 130, width: 82, class: "product-img") %>
                  <% end %>
                  <div>
                    <p class="medium-title"><span class="bold">Title:</span> <%= request.buyer_item.book.title %></p>
                    <p class="medium-title"><span class="bold">Author:</span> <%= request.buyer_item.book.author %></p>
                  </div>
                </div>
                <div class="d-flex align-items-center">
                  <%= image_tag("https://image.flaticon.com/icons/png/512/335/335522.png", crop: :fill, height: 30) %>
                </div>
                <div class="their-book">
                  <% if request.seller_item %>
                  <div>
                    <p class="medium-title"><span class="bold">Title:</span> <%= request.seller_item.book.title %></p>
                    <p class="medium-title"><span class="bold">Author:</span> <%= request.seller_item.book.author %></p>
                  </div>
                  <div class="d-flex justify-content-end width100">
                    <% if request.seller_item.book.photo.attached? %>
                      <%= cl_image_tag(request.seller_item.book.photo.key, crop: :fill, height: 130, width: 82, class: "product-img") %>
                    <% end %>
                  </div>
                  <% else %>
                    <p>They have not suggested a book from their catalog</p>
                  <% end %>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <%= link_to "Delete", request_path(request), method: :delete, class: "btn btn-secondary" %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  <% end %>
</div>
